主要笼统介绍编译的过程和其中一些细节点。
-----
## 编译四步骤

1. 预编译
展开所有宏定义。
处理#incloud预编译指令，将被包含的文件插入到该预编译指令的指定位置，这个过程是递归进行的。
删除所有的注释。
添加行号和文件名标识。
2. 编译
把预处理完的文件进行一系列的词法分析，语法分析，语义分析及优化后生成相应的汇编代码文件。
`$gcc -S hello.c -o hello.s`
3. 汇编
将汇编代码转变为机器可以执行的指令。
只需要将汇编指令和机器指令的对照表一一翻译就可以了。
`$gcc -c hello.s -o hello.o`
也可以之间将源代码文件经过预编译，编译，汇编直接生成汇编文件。
`$gcc -c hello.c -o hello.o`
4. 链接
将一大堆文件链接起来成为最终的可执行文件。

------
## 具体编译过程
- 词法分析：扫描源代码，将源代码字符序列切分成一系列的记号。并分别放入到不同表中，以备后续使用。

- 语法分析：对扫描器产生的记号进行语法分析，从而产生语法树。整个分析过程采用上下文无关语法，并且确定了不同运算符的优先级和含义。如果表达式不合法，编译器将会在这一步报错。

- 语义分析：确定代码是否在语义上合法。此处只能分析静态语义（static semantic），指在在编译期可以确定的语义。静态语义通常包括声明和类型的匹配，类型的转换。
通过语义分析，语法树的表达式都被标识上了类型。

- 中间语言生成：编译器会进行大量的优化操作，由于直接在语法树上进行优化比较困难，所以会将整个语法树转换成中间代码（intermediate code），并在此处进行优化。
中间代码使编译器被分为前端和后端，编译器前端负责产生机器无关的中间代码，编译器后端将中间代码转换成目标机器代码。这样有助于编译器的跨平台使用，只需要一个前端和针对不同机器平台的若干个后端。

- 目标代码生成和优化：编译器后端主要包括代码生成器（Code Generator）和目标代码优化器（Target Code Optimizer）。代码生成器负责将中间代码转换为目标机器代码，这个过程十分依赖目标机器；然后由目标代码优化器对上述目标代码进行优化，比如选择合适的寻址方式，删除多余指令等等。注意：编译器不能确定变量的最终地址，这些需要链接器来完成。

----

## 模块拼装---静态链接
软件的规模越来越大，人们把每个源代码模块独立地编译，然后按照需要将它们组装起来，这个过程就是链接。链接的主要内容是把各个模块之间相互引用的部分都处理好。
### 主要过程包括：
#### 地址和空间分配 Address and storage allocation
#### 符号决议       Symbol resolution
#### 重定向         Relocation

整个过程的主要内容还是将引用外部模块的具体函数，变量等地址根据所引用的符号正确的写入。